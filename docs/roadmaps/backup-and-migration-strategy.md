# Homestead Backup & Migration Strategy

**Purpose:** Plan for migrating Homestead to a fresh server, removing Clawdbot, and enabling portable backup/restore for all users.

**Created:** 2026-01-31
**Status:** Research Phase Complete

---

## Executive Summary

Homestead data is split between **git-tracked files** (lore) and **local user data** (~/.homestead). To migrate cleanly:

1. **Git-tracked data** (lore) â†’ already safe, just clone repo
2. **User-specific data** (journal, scratchpad, skills) â†’ needs export/import mechanism
3. **Databases** â†’ most can be regenerated, some need backup (usage history, tasks)
4. **Config** â†’ minimal, easy to recreate

**Total user data to backup:** ~500 KB (mostly markdown files)

---

## Current Data Layout

### 1. Git Repository (`/home/milo/projects/personal/homestead/`)

**Location:** Version controlled, pushed to remote
**Size:** Unknown (full repo)
**Backup Status:** âœ… Safe (in git)

**Contents:**
```
homestead/
â”œâ”€â”€ lore/                    # Core identity files (8 files, ~30 KB)
â”‚   â”œâ”€â”€ soul.md             # Agent identity/personality
â”‚   â”œâ”€â”€ user.md             # User profile (Milo)
â”‚   â”œâ”€â”€ claude.md           # Claude-specific config
â”‚   â”œâ”€â”€ agents.md           # Multi-agent orchestration
â”‚   â”œâ”€â”€ identity.md         # System identity
â”‚   â”œâ”€â”€ architecture.md     # System architecture notes
â”‚   â”œâ”€â”€ triggers.md         # Behavioral triggers
â”‚   â””â”€â”€ dreamfactory-value-prop.md  # Example learned knowledge
â”œâ”€â”€ docs/                   # Documentation (this file!)
â”œâ”€â”€ packages/               # Source code
â”‚   â”œâ”€â”€ herald/            # Telegram bot
â”‚   â”œâ”€â”€ manor/             # Web UI + API
â”‚   â”œâ”€â”€ mcp-homestead/     # MCP server
â”‚   â””â”€â”€ common/            # Shared libraries
â””â”€â”€ tests/                 # Test suite
```

**Notes:**
- Lore files are **indexed** by memory.db but **stored** in git
- Lore contains core identity (soul.md, user.md) - critical to preserve
- Example files (*.md.example) show template structure

---

### 2. User Data Directory (`~/.homestead/`)

**Location:** `/home/milo/.homestead/`
**Size:** ~8.7 MB (mostly logs and DB WAL files)
**Backup Status:** âŒ Not in git, needs backup strategy

#### Directory Structure

```
~/.homestead/
â”œâ”€â”€ journal/                         # Daily reflections (8 KB)
â”‚   â””â”€â”€ 2026-01-31.md               # Today's journal entry
â”‚
â”œâ”€â”€ scratchpad/                      # Working notes (400 KB)
â”‚   â”œâ”€â”€ *.md                        # 14 markdown files
â”‚   â””â”€â”€ img_*.jpg                   # 2 screenshots from Telegram
â”‚
â”œâ”€â”€ skills/                          # Reusable skill docs (20 KB)
â”‚   â”œâ”€â”€ debugging.md
â”‚   â”œâ”€â”€ git-workflow.md
â”‚   â”œâ”€â”€ python-patterns.md
â”‚   â””â”€â”€ telegram-formatting.md
â”‚
â”œâ”€â”€ almanac/                         # Scheduled jobs
â”‚   â””â”€â”€ jobs.db                     # 1 job: "7am News Briefing" (16 KB)
â”‚
â”œâ”€â”€ steward/                         # Task management
â”‚   â””â”€â”€ tasks.db                    # 9 tasks (28 KB)
â”‚
â”œâ”€â”€ memory.db                        # FTS5 search index (4 KB + 1.7 MB WAL)
â”œâ”€â”€ usage.db                         # Token usage history (100 KB)
â”œâ”€â”€ watchtower.db                    # System logs (400 KB + 4 MB WAL)
â”œâ”€â”€ proposals.db                     # Code proposals (932 KB, but 0 rows!)
â”œâ”€â”€ outbox.db                        # Telegram message queue (28 KB)
â”‚
â”œâ”€â”€ config_overrides.json            # Runtime config (4 KB)
â”œâ”€â”€ config_backups/                  # (empty directory)
â”‚
â””â”€â”€ *.log                            # Process logs (732 KB total)
    â”œâ”€â”€ herald-stdout.log           # 693 KB
    â”œâ”€â”€ herald-watchdog.log         # 23 KB
    â””â”€â”€ manor-ui.log                # 11 KB
```

#### Database Analysis

| Database | Size | Rows | Regenerable? | Backup Priority |
|----------|------|------|--------------|-----------------|
| **memory.db** | 4 KB + 1.7 MB WAL | 23 docs | âœ… Yes (from markdown) | LOW - can reindex |
| **usage.db** | 100 KB | 201 records | âŒ No | **HIGH** - historical data |
| **watchtower.db** | 400 KB + 4 MB WAL | 1918 logs | âŒ No (but not critical) | LOW - just logs |
| **proposals.db** | 932 KB | 0 proposals, 5 orphan files | âœ… Yes (broken anyway) | SKIP - empty/broken |
| **outbox.db** | 28 KB | 27 messages | âœ… Yes | LOW - transient queue |
| **tasks.db** | 28 KB | 9 tasks | âŒ No | **MEDIUM** - active work |
| **jobs.db** | 16 KB | 1 job | âŒ No | **MEDIUM** - user schedules |

**Key Findings:**
- **memory.db** is just an FTS5 index - can be regenerated by running reindex
- **usage.db** contains 201 token usage records - historical data worth preserving
- **proposals.db** is 932 KB but has 0 actual proposals (broken state)
- **tasks.db** has 9 active tasks (work-in-progress tracking)
- **jobs.db** has 1 scheduled job ("7am News Briefing")

---

### 3. Claude CLI State (`~/.claude/`)

**Location:** `/home/milo/.claude/`
**Size:** 194 MB
**Backup Status:** âš ï¸ Unknown - need to investigate

**Contents:**
```
~/.claude/
â”œâ”€â”€ .claude.json              # Current config (3.5 KB)
â”œâ”€â”€ .claude.json.backup.*     # 5 backup copies (3.5 KB each)
â””â”€â”€ [unknown subdirectories]  # 194 MB of session data?
```

**Questions:**
- What's in the 194 MB? Session transcripts?
- Is this needed for Homestead or just Claude CLI standalone?
- Can we nuke this and start fresh?

**Action:** Need to explore this directory further.

---

### 4. Clawdbot Legacy (`~/.clawdbot/`)

**Location:** `/home/milo/.clawdbot/`
**Size:** 5.4 MB
**Backup Status:** ğŸ—‘ï¸ DELETE - old system being replaced

**Action:** Safe to nuke entirely. No backup needed.

---

### 5. Home Directory Clutter

**Other files in `/home/milo/`:**
```
~/
â”œâ”€â”€ agent_a.py, agent_a2.py, agent_a_final.py, agent_b.py  # Test scripts
â”œâ”€â”€ check_bg.py, check_bg2.py, check_inv.py               # Test scripts
â”œâ”€â”€ dashboard.py, dashboard2.py, executive_dashboard.py   # Test scripts
â”œâ”€â”€ fetch_spec.py                                         # Test script
â”œâ”€â”€ df-commercial-master (4).zip                          # 1.1 MB zip
â”œâ”€â”€ hearth-reflection-skill.tar.gz                        # 14 KB tarball
â”œâ”€â”€ clawd/                                                # Unknown (need to check)
â””â”€â”€ council/                                              # Unknown (need to check)
```

**Status:** Likely all test/scratch files. Can probably delete or leave behind.

**Action:** Review clawd/ and council/ directories.

---

## Backup Requirements

### Critical (Must Backup)

1. **User-generated content:**
   - `~/.homestead/journal/*.md` (8 KB) - daily reflections, learning logs
   - `~/.homestead/scratchpad/*.md` (400 KB) - working notes, analysis
   - `~/.homestead/skills/*.md` (20 KB) - custom skill definitions

2. **Historical data:**
   - `~/.homestead/usage.db` (100 KB) - token usage history, cost tracking

3. **Active work state:**
   - `~/.homestead/steward/tasks.db` (28 KB) - in-progress tasks
   - `~/.homestead/almanac/jobs.db` (16 KB) - scheduled jobs

4. **User config:**
   - `~/.homestead/config_overrides.json` (4 KB) - runtime settings

**Total critical data: ~576 KB**

---

### Optional (Nice to Have)

1. **Logs (for debugging):**
   - `~/.homestead/*.log` (732 KB) - recent activity logs
   - `~/.homestead/watchtower.db` (4.4 MB) - structured logs

2. **Transient queues:**
   - `~/.homestead/outbox.db` (28 KB) - pending Telegram messages

**Total optional data: ~5.1 MB**

---

### Skip (Can Recreate)

1. **Search indexes:**
   - `~/.homestead/memory.db` - regenerated from markdown with `POST /api/memory/reindex`

2. **Broken/empty databases:**
   - `~/.homestead/proposals.db` - 0 rows despite 932 KB size (corrupt or test data)

3. **Git-tracked content:**
   - `/home/milo/projects/personal/homestead/lore/` - already in git

---

## Export/Import Strategy

### Design Goals

1. **User-portable:** Any user can export/import their data
2. **Git-agnostic:** Don't put personal data (journal, scratchpad) in git
3. **Simple format:** Tarball of markdown + SQLite databases
4. **Versioned:** Include metadata for compatibility checking
5. **Selective restore:** Let users choose what to import

---

### Proposed Format: Homestead Personal Archive (.hpa)

**File structure:**
```
homestead-backup-YYYYMMDD-HHMMSS.hpa  (tarball)
â”‚
â”œâ”€â”€ manifest.json                    # Metadata + version info
â”œâ”€â”€ journal/                         # Daily reflections
â”‚   â”œâ”€â”€ 2026-01-30.md
â”‚   â””â”€â”€ 2026-01-31.md
â”œâ”€â”€ scratchpad/                      # Working notes
â”‚   â”œâ”€â”€ *.md
â”‚   â””â”€â”€ *.jpg                       # Images from Telegram
â”œâ”€â”€ skills/                          # Custom skills
â”‚   â””â”€â”€ *.md
â”œâ”€â”€ databases/                       # SQLite databases
â”‚   â”œâ”€â”€ usage.db                    # Token usage history
â”‚   â”œâ”€â”€ tasks.db                    # Active tasks
â”‚   â””â”€â”€ jobs.db                     # Scheduled jobs
â”œâ”€â”€ config/                          # Configuration
â”‚   â””â”€â”€ config_overrides.json
â””â”€â”€ logs/ (optional)                 # Recent logs
    â”œâ”€â”€ herald-stdout.log
    â””â”€â”€ watchtower.db
```

**manifest.json format:**
```json
{
  "version": "1.0.0",
  "homestead_version": "0.1.0",
  "exported_at": "2026-01-31T10:30:00Z",
  "exported_by": "milo",
  "agent_name": "Milo",
  "contents": {
    "journal_entries": 1,
    "scratchpad_files": 14,
    "skills": 4,
    "tasks": 9,
    "jobs": 1,
    "usage_records": 201
  },
  "notes": "Backup before server migration"
}
```

---

### Export Command (Proposed)

**Backend API:**
```
POST /api/backup/export
{
  "include_logs": false,
  "include_databases": ["usage", "tasks", "jobs"],
  "password": "optional-encryption-key"
}

Response:
{
  "archive_path": "/tmp/homestead-backup-20260131-103000.hpa",
  "size_bytes": 589824,
  "checksum": "sha256:abc123..."
}
```

**CLI command (future):**
```bash
homestead backup export --output ~/backups/
# Creates: ~/backups/homestead-backup-20260131-103000.hpa
```

**MCP tool:**
```json
{
  "name": "export_backup",
  "description": "Export user data to portable archive"
}
```

---

### Import Command (Proposed)

**Backend API:**
```
POST /api/backup/import
{
  "archive_path": "/path/to/backup.hpa",
  "merge_strategy": "skip_existing",  // or "overwrite", "merge"
  "import_items": ["journal", "scratchpad", "skills", "tasks", "jobs", "usage"]
}

Response:
{
  "imported": {
    "journal_entries": 1,
    "scratchpad_files": 14,
    "skills": 4,
    "tasks": 9,
    "jobs": 1,
    "usage_records": 201
  },
  "skipped": [],
  "errors": []
}
```

**CLI command (future):**
```bash
homestead backup import ~/backups/homestead-backup-20260131-103000.hpa
```

**MCP tool:**
```json
{
  "name": "import_backup",
  "description": "Import user data from portable archive"
}
```

---

### Merge Strategies

When importing, handle conflicts:

1. **skip_existing** (default): Don't overwrite existing files/records
2. **overwrite**: Replace existing data with imported data
3. **merge**:
   - Journal: Append new entries, don't overwrite existing dates
   - Scratchpad: Import with filename suffix if conflict (e.g., `notes.md` â†’ `notes-imported.md`)
   - Skills: Skip if exists (user must manually merge)
   - Tasks/Jobs: Import as new records (don't merge by ID)
   - Usage: Append records (dedupe by timestamp)

---

## Migration Procedure

### Phase 1: Pre-Migration (Current Server)

1. **Export user data:**
   ```bash
   # Via API or future CLI
   POST /api/backup/export
   # Download: homestead-backup-YYYYMMDD.hpa
   ```

2. **Verify git is clean:**
   ```bash
   cd ~/projects/personal/homestead
   git status  # Should be clean or committed
   git push    # Ensure remote has latest lore files
   ```

3. **Document custom config:**
   - Note any environment variables set
   - Document Telegram bot token location
   - Document Claude API key location
   - List any manual integrations

---

### Phase 2: Fresh Server Setup

1. **Install base system:**
   ```bash
   # On new server
   curl -fsSL https://install.homestead.sh | bash  # (hypothetical)
   # Or manual: clone repo, run setup script
   ```

2. **Configure credentials:**
   - Set `TELEGRAM_BOT_TOKEN`
   - Set `ANTHROPIC_API_KEY`
   - Set `HOMESTEAD_DATA_DIR` (default: `~/.homestead`)

3. **Clone lore from git:**
   ```bash
   cd ~/projects/personal/homestead
   git clone <repo-url>
   # Lore files are already in repo at lore/
   ```

4. **Import user data:**
   ```bash
   # Upload backup.hpa to server
   POST /api/backup/import
   # Or: homestead backup import backup.hpa
   ```

5. **Rebuild search index:**
   ```bash
   POST /api/memory/reindex
   # Regenerates memory.db from lore + scratchpad + journal
   ```

6. **Verify migration:**
   - Check journal entries: `GET /api/journal`
   - Search memory: `POST /api/memory/search`
   - Review tasks: `GET /api/tasks`
   - Test Telegram bot
   - Test Manor UI

---

### Phase 3: Cleanup (Old Server)

1. **Verify data on new server** (critical!)
2. **Delete Clawdbot:**
   ```bash
   rm -rf ~/.clawdbot
   ```
3. **Delete test scripts:**
   ```bash
   rm ~/agent_*.py ~/check_*.py ~/dashboard*.py
   ```
4. **Delete Claude CLI state** (if not needed):
   ```bash
   rm -rf ~/.claude  # 194 MB
   ```
5. **Keep Homestead data temporarily** (paranoia):
   ```bash
   mv ~/.homestead ~/.homestead.old
   # Delete after 30 days if all is well
   ```

---

## Implementation Plan

### Week 1: Backend Export/Import

**Tasks:**
1. Create `/api/backup/export` endpoint
   - Gather files from journal/, scratchpad/, skills/
   - Export selected databases (usage.db, tasks.db, jobs.db)
   - Generate manifest.json
   - Create tarball
   - Return download link

2. Create `/api/backup/import` endpoint
   - Extract tarball to temp directory
   - Validate manifest.json
   - Import files with merge strategy
   - Import database records
   - Trigger memory reindex
   - Return summary

3. Add backup management UI in Manor
   - Export button with options (include logs? include databases?)
   - Import form with file upload
   - List previous backups (if stored)

**Files to modify:**
- `manor/api/routers/backup.py` (new)
- `manor/src/app/backup/page.tsx` (new)
- `packages/common/common/backup.py` (shared logic)

---

### Week 2: MCP Tools + Testing

**Tasks:**
1. Add MCP tools for export/import
   - `export_backup` tool
   - `import_backup` tool
   - `list_backups` tool

2. Write tests:
   - Export creates valid tarball
   - Import restores all data
   - Merge strategies work correctly
   - Corruption detection (bad tarball)

3. Documentation:
   - User guide: "How to backup/restore"
   - Migration guide: "Moving to a new server"
   - Disaster recovery: "What if I lose my data?"

**Files to modify:**
- `mcp-homestead/mcp_homestead/server.py` (add tools)
- `tests/test_backup.py` (new)
- `docs/backup-guide.md` (new)

---

### Week 3: CLI + Automation

**Tasks:**
1. Add CLI commands (future):
   ```bash
   homestead backup export
   homestead backup import <file>
   homestead backup list
   ```

2. Automated backups (optional):
   - Scheduled job: daily export to S3/Dropbox/local
   - Retention policy (keep last 7 days, 4 weeks, 12 months)

3. Cloud sync integration (optional):
   - Sync journal/scratchpad to cloud storage
   - Conflict resolution for multi-device usage

---

## Open Questions

### 1. Claude CLI State (~/.claude/ - 194 MB)

**Question:** What's in this directory? Do we need it?

**Investigation needed:**
```bash
du -sh ~/.claude/*
ls -lah ~/.claude/
```

**Options:**
- If it's just session transcripts: Skip backup (regenerable)
- If it's auth tokens: Document separately (sensitive)
- If it's unknown: Investigate before nuking server

---

### 2. Lore Location Strategy

**Current:** Lore is in git repo at `homestead/lore/`

**Question:** Should users have personal lore outside git?

**Options:**
- **Option A (current):** All lore in git
  - Pro: Version controlled, team collaboration
  - Con: Personal info in git (privacy concern)

- **Option B:** Split lore into `core/` (git) and `personal/` (local)
  - Pro: Separate shared vs private identity
  - Con: More complex, need to merge on read

- **Option C:** All lore in `~/.homestead/lore/` (not git)
  - Pro: Fully private by default
  - Con: Lose version control, harder to collaborate

**Recommendation:** Keep current approach (all in git) but add `.gitignore` option for sensitive files (e.g., `lore/personal.md`).

---

### 3. Multi-User Homes

**Question:** What if multiple users share a Homestead instance?

**Current state:** Single-user design (one agent name, one Telegram bot)

**Future considerations:**
- User-scoped data directories: `~/.homestead/users/{username}/`
- Per-user lore: `lore/{username}/`
- Shared lore: `lore/shared/`
- Export includes user namespace

**Action:** Document as future enhancement, not required for v1.

---

### 4. Encryption

**Question:** Should backups be encrypted?

**Options:**
- **No encryption (v1):** Simple tarball, user encrypts manually if needed
- **Optional encryption (v2):** AES-256 with password
- **Automatic encryption (v3):** Use SSH keys or keychain

**Recommendation:** Start with no encryption, add later if users request it.

---

## Security Considerations

### Sensitive Data in Backups

**What's sensitive:**
- `usage.db` contains session IDs, model names (not super sensitive)
- `journal/` may contain personal thoughts, private notes
- `scratchpad/` may contain API keys, passwords (user error)
- `skills/` likely safe (just procedures)

**Mitigations:**
1. **Warn users** before export: "Review scratchpad for sensitive data"
2. **Exclude patterns:** Add `.backupignore` like `.gitignore`
3. **Scan for secrets:** Detect API keys, passwords before export (optional)
4. **Encrypt archives:** Optional password protection

---

### Backup Storage

**Where should backups go?**

**Options:**
1. **Local filesystem:** `/tmp/`, `~/backups/` (default)
   - Pro: Simple, no network dependency
   - Con: Lost if server dies

2. **User-provided storage:** S3, Dropbox, etc.
   - Pro: Survives server failure
   - Con: Requires cloud credentials

3. **Homestead cloud service:** (future product idea)
   - Pro: Seamless, managed backups
   - Con: Requires infrastructure, costs money

**Recommendation:** Start with local filesystem, add cloud sync as optional feature.

---

## Cost/Benefit Analysis

### Without Backup System

**Risks:**
- Lose journal entries (personal learning log) âŒ
- Lose scratchpad notes (active work) âŒ
- Lose usage history (cost tracking) âŒ
- Lose active tasks (work-in-progress) âŒ
- Can recreate lore from git âœ…
- Can recreate memory index âœ…

**Effort to manually backup:**
- 30 minutes to tar up directories
- 10 minutes to document procedure
- High risk of forgetting something

---

### With Backup System

**Benefits:**
- One-click export âœ…
- Guaranteed completeness âœ…
- Version metadata (compatibility checking) âœ…
- Portable across servers âœ…
- Easy onboarding for new users âœ…

**Development cost:**
- Week 1: Export/import APIs (16 hours)
- Week 2: MCP tools + tests (16 hours)
- Week 3: CLI + docs (8 hours)
- **Total: 40 hours**

**ROI:** High - enables safe server migration and disaster recovery.

---

## Success Criteria

### Milestone 1: Manual Backup Works

- âœ… Can export .hpa archive via API
- âœ… Can import .hpa archive via API
- âœ… Import restores all journal entries
- âœ… Import restores all scratchpad files
- âœ… Import restores all skills
- âœ… Import restores tasks, jobs, usage history
- âœ… Memory reindex works after import

---

### Milestone 2: Tested Migration

- âœ… Migrate from old server to fresh install
- âœ… All data intact (manual verification)
- âœ… Search works (memory index regenerated)
- âœ… Telegram bot functional
- âœ… Manor UI functional
- âœ… No data loss

---

### Milestone 3: User-Friendly

- âœ… UI for export/import in Manor
- âœ… MCP tools accessible from Claude CLI
- âœ… Documentation complete
- âœ… <5 minute export time
- âœ… <5 minute import time
- âœ… Clear error messages on failure

---

## Next Steps

### Immediate (Today)

1. âœ… **Research complete** (this document)
2. â³ Investigate `~/.claude/` directory (194 MB - what's in it?)
3. â³ Investigate `~/clawd/` and `~/council/` directories
4. â³ Update journal with research findings

### Short-term (This Week)

1. Design export/import API spec
2. Create database schema for backup metadata (if needed)
3. Build export endpoint
4. Build import endpoint
5. Test with current data

### Medium-term (Next Week)

1. Add MCP tools
2. Add Manor UI
3. Write user documentation
4. Test full migration on staging server

### Long-term (Future)

1. Add CLI commands
2. Add scheduled backups
3. Add cloud sync integration
4. Add encryption support
5. Add multi-user support

---

## Appendix A: Database Schemas

### usage.db

```sql
CREATE TABLE usage_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id TEXT,
    chat_id INTEGER,
    session_name TEXT,
    model TEXT,
    input_tokens INTEGER,
    output_tokens INTEGER,
    cache_creation_tokens INTEGER,
    cache_read_tokens INTEGER,
    cost_usd REAL,
    num_turns INTEGER,
    source TEXT,
    started_at REAL,
    created_at REAL DEFAULT (unixepoch())
);
```

**Backup strategy:** Export entire table, import with deduplication by (session_id, started_at).

---

### tasks.db

```sql
CREATE TABLE tasks (
    id TEXT PRIMARY KEY,
    title TEXT NOT NULL,
    description TEXT DEFAULT '',
    status TEXT NOT NULL DEFAULT 'pending',
    priority TEXT NOT NULL DEFAULT 'normal',
    assignee TEXT DEFAULT 'auto',
    blockers_json TEXT DEFAULT '[]',
    depends_on_json TEXT DEFAULT '[]',
    created_at REAL NOT NULL,
    updated_at REAL NOT NULL,
    completed_at REAL,
    tags_json TEXT DEFAULT '[]',
    notes_json TEXT DEFAULT '[]',
    source TEXT DEFAULT ''
);
```

**Backup strategy:** Export entire table, import as new records (generate new UUIDs to avoid conflicts).

---

### jobs.db

```sql
CREATE TABLE jobs (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    description TEXT DEFAULT '',
    schedule_type TEXT NOT NULL,
    schedule_value TEXT NOT NULL,
    action_type TEXT NOT NULL,
    action_config TEXT DEFAULT '{}',
    enabled INTEGER DEFAULT 1,
    created_at REAL NOT NULL,
    updated_at REAL NOT NULL,
    last_run_at REAL,
    next_run_at REAL
);
```

**Backup strategy:** Export entire table, import by name (skip if exists, or merge config).

---

## Appendix B: File Inventory

### Critical Files (Must Backup)

| Path | Size | Description | Frequency |
|------|------|-------------|-----------|
| `~/.homestead/journal/*.md` | 8 KB | Daily reflections | Daily |
| `~/.homestead/scratchpad/*.md` | 400 KB | Working notes | Continuous |
| `~/.homestead/skills/*.md` | 20 KB | Custom skills | Weekly |
| `~/.homestead/usage.db` | 100 KB | Token usage history | Hourly |
| `~/.homestead/steward/tasks.db` | 28 KB | Active tasks | Hourly |
| `~/.homestead/almanac/jobs.db` | 16 KB | Scheduled jobs | Rarely |
| `~/.homestead/config_overrides.json` | 4 KB | Runtime config | Rarely |
| **Total** | **~576 KB** | | |

---

### Optional Files (Nice to Have)

| Path | Size | Description | Backup? |
|------|------|-------------|---------|
| `~/.homestead/watchtower.db` | 4.4 MB | Structured logs | Optional |
| `~/.homestead/herald-stdout.log` | 693 KB | Process logs | Optional |
| `~/.homestead/outbox.db` | 28 KB | Message queue | No |
| **Total** | **~5.1 MB** | | |

---

### Skip Files (Can Recreate)

| Path | Size | Description | Regenerable? |
|------|------|-------------|--------------|
| `~/.homestead/memory.db` | 1.7 MB | FTS5 search index | âœ… Yes (reindex) |
| `~/.homestead/proposals.db` | 932 KB | Code proposals | âœ… Yes (broken/empty) |
| `homestead/lore/*.md` | 30 KB | Identity files | âœ… Yes (in git) |

---

## Appendix C: Research Notes

### Clawdbot vs Homestead

**Clawdbot:** Old system being replaced
**Location:** `~/.clawdbot/` (5.4 MB)
**Status:** Can safely delete

**Homestead:** New system
**Location:** `~/.homestead/` + git repo
**Status:** Active, needs backup strategy

---

### Memory System (Cronicle)

**How it works:**
1. Markdown files stored in: `lore/`, `scratchpad/`, `journal/`
2. Indexer scans directories, parses YAML frontmatter
3. Builds FTS5 search index in `memory.db`
4. Search API queries FTS5 for fast results

**Key insight:** `memory.db` is just a search index, not source of truth.

**Implication:** Only need to backup markdown files, can regenerate index.

---

### Proposal System (Broken)

**Current state:**
- `proposals.db` is 932 KB but has **0 proposals**
- Has 5 orphaned `proposal_files` records
- Outbox has 3 "ghost proposal" notifications
- System is being revamped by another agent

**Implication:** Don't backup proposals.db, it's corrupt. Wait for revamp.

---

## Document Status

**Research Phase:** âœ… Complete
**Design Phase:** â³ In Progress (export/import spec)
**Implementation Phase:** â¸ï¸ Blocked (waiting for proposal revamp)

**Last Updated:** 2026-01-31 10:30
**Next Review:** After proposal system revamp complete

---

## Related Documents

- [Memory Roadmap](./memory-roadmap.md) - 10x memory enhancement plan
- [Governance Priorities](./governance-priorities.md) - Security & access control
- [Architecture](../lore/architecture.md) - System architecture overview

---

**End of Document**
